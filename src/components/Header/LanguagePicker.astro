---
import { Image } from "astro:assets";
import { getLangFromUrl } from "../../i18n/utils";
import croFlag from "../../src/svg/hr.svg";
import engFlag from "../../src/svg/en.svg";

const lang = getLangFromUrl(Astro.url);
---

<div class="min-w-max flex items-center gap-x-3">
  <button
    language-switcher
    onclick={`(() => {
      const currentLang = '${lang}';
      let newPath = currentLang === 'hr_HR' ? '/en' : '/';
      window.location.href = newPath;
    })()`}
  >
    {
      lang === "en" ? (
        <Image
          src={croFlag}
          alt="croFlag"
          loading="eager"
          width="20"
          height="24"
          class=" left-1/2 -translate-x-1/2  bottom-0 max-h-full"
        />
      ) : (
        <Image
          src={engFlag}
          alt="engFlag"
          loading="eager"
          width="20"
          height="24"
          class="left-1/2 -translate-x-1/2  bottom-0 max-h-full"
        />
      )
    }
    <span class="sr-only">change language</span>
  </button>
</div>
